import{r as n,R as B}from"./react-DZLWSh8C.js";import{R as Y}from"./react-dom-GVliqCMN.js";import{m as J,N as G,u as W,a as q,b as Q,D as M,c as k,R as X,d as Z}from"./react-router-ZDDGL1X6.js";import{b as $,d as ee,E as te,i as j,s as ne}from"./@remix-run-4Kn-geKd.js";/**
 * React Router DOM v6.26.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function T(){return T=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},T.apply(this,arguments)}const re="6";try{window.__reactRouterVersion=re}catch{}function Te(t,r){return $({basename:void 0,future:T({},void 0,{v7_prependBasename:!0}),history:ee({window:void 0}),hydrationData:oe(),routes:t,mapRouteProperties:J,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function oe(){var t;let r=(t=window)==null?void 0:t.__staticRouterHydrationData;return r&&r.errors&&(r=T({},r,{errors:ie(r.errors)})),r}function ie(t){if(!t)return null;let r=Object.entries(t),e={};for(let[i,o]of r)if(o&&o.__type==="RouteErrorResponse")e[i]=new te(o.status,o.statusText,o.data,o.internal===!0);else if(o&&o.__type==="Error"){if(o.__subType){let u=window[o.__subType];if(typeof u=="function")try{let l=new u(o.message);l.stack="",e[i]=l}catch{}}if(e[i]==null){let u=new Error(o.message);u.stack="",e[i]=u}}else e[i]=o;return e}const se=n.createContext({isTransitioning:!1}),ae=n.createContext(new Map),le="startTransition",U=B[le],ue="flushSync",D=Y[ue];function ce(t){U?U(t):t()}function g(t){D?D(t):t()}class fe{constructor(){this.status="pending",this.promise=new Promise((r,e)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",r(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",e(i))}})}}function Ee(t){let{fallbackElement:r,router:e,future:i}=t,[o,u]=n.useState(e.state),[l,c]=n.useState(),[v,p]=n.useState({isTransitioning:!1}),[s,S]=n.useState(),[f,y]=n.useState(),[R,P]=n.useState(),E=n.useRef(new Map),{v7_startTransition:I}=i||{},_=n.useCallback(a=>{I?ce(a):a()},[I]),F=n.useCallback((a,m)=>{let{deletedFetchers:d,unstable_flushSync:N,unstable_viewTransitionOpts:h}=m;d.forEach(w=>E.current.delete(w)),a.fetchers.forEach((w,z)=>{w.data!==void 0&&E.current.set(z,w.data)});let K=e.window==null||e.window.document==null||typeof e.window.document.startViewTransition!="function";if(!h||K){N?g(()=>u(a)):_(()=>u(a));return}if(N){g(()=>{f&&(s&&s.resolve(),f.skipTransition()),p({isTransitioning:!0,flushSync:!0,currentLocation:h.currentLocation,nextLocation:h.nextLocation})});let w=e.window.document.startViewTransition(()=>{g(()=>u(a))});w.finished.finally(()=>{g(()=>{S(void 0),y(void 0),c(void 0),p({isTransitioning:!1})})}),g(()=>y(w));return}f?(s&&s.resolve(),f.skipTransition(),P({state:a,currentLocation:h.currentLocation,nextLocation:h.nextLocation})):(c(a),p({isTransitioning:!0,flushSync:!1,currentLocation:h.currentLocation,nextLocation:h.nextLocation}))},[e.window,f,s,E,_]);n.useLayoutEffect(()=>e.subscribe(F),[e,F]),n.useEffect(()=>{v.isTransitioning&&!v.flushSync&&S(new fe)},[v]),n.useEffect(()=>{if(s&&l&&e.window){let a=l,m=s.promise,d=e.window.document.startViewTransition(async()=>{_(()=>u(a)),await m});d.finished.finally(()=>{S(void 0),y(void 0),c(void 0),p({isTransitioning:!1})}),y(d)}},[_,l,s,e.window]),n.useEffect(()=>{s&&l&&o.location.key===l.location.key&&s.resolve()},[s,f,o.location,l]),n.useEffect(()=>{!v.isTransitioning&&R&&(c(R.state),p({isTransitioning:!0,flushSync:!1,currentLocation:R.currentLocation,nextLocation:R.nextLocation}),P(void 0))},[v.isTransitioning,R]),n.useEffect(()=>{},[]);let x=n.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:a=>e.navigate(a),push:(a,m,d)=>e.navigate(a,{state:m,preventScrollReset:d==null?void 0:d.preventScrollReset}),replace:(a,m,d)=>e.navigate(a,{replace:!0,state:m,preventScrollReset:d==null?void 0:d.preventScrollReset})}),[e]),b=e.basename||"/",A=n.useMemo(()=>({router:e,navigator:x,static:!1,basename:b}),[e,x,b]),H=n.useMemo(()=>({v7_relativeSplatPath:e.future.v7_relativeSplatPath}),[e.future.v7_relativeSplatPath]);return n.createElement(n.Fragment,null,n.createElement(M.Provider,{value:A},n.createElement(k.Provider,{value:o},n.createElement(ae.Provider,{value:E.current},n.createElement(se.Provider,{value:v},n.createElement(X,{basename:b,location:o.location,navigationType:o.historyAction,navigator:x,future:H},o.initialized||e.future.v7_partialHydration?n.createElement(de,{routes:e.routes,future:e.future,state:o}):r))))),null)}const de=n.memo(ve);function ve(t){let{routes:r,future:e,state:i}=t;return Z(r,void 0,i,e)}function _e(t){let{getKey:r,storageKey:e}=t;return he({getKey:r,storageKey:e}),null}var C;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(C||(C={}));var O;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(O||(O={}));function pe(t){let r=n.useContext(M);return r||j(!1),r}function me(t){let r=n.useContext(k);return r||j(!1),r}const V="react-router-scroll-positions";let L={};function he(t){let{getKey:r,storageKey:e}=t===void 0?{}:t,{router:i}=pe(C.UseScrollRestoration),{restoreScrollPosition:o,preventScrollReset:u}=me(O.UseScrollRestoration),{basename:l}=n.useContext(G),c=W(),v=q(),p=Q();n.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),we(n.useCallback(()=>{if(p.state==="idle"){let s=(r?r(c,v):null)||c.key;L[s]=window.scrollY}try{sessionStorage.setItem(e||V,JSON.stringify(L))}catch{}window.history.scrollRestoration="auto"},[e,r,p.state,c,v])),typeof document<"u"&&(n.useLayoutEffect(()=>{try{let s=sessionStorage.getItem(e||V);s&&(L=JSON.parse(s))}catch{}},[e]),n.useLayoutEffect(()=>{let s=r&&l!=="/"?(f,y)=>r(T({},f,{pathname:ne(f.pathname,l)||f.pathname}),y):r,S=i==null?void 0:i.enableScrollRestoration(L,()=>window.scrollY,s);return()=>S&&S()},[i,l,r]),n.useLayoutEffect(()=>{if(o!==!1){if(typeof o=="number"){window.scrollTo(0,o);return}if(c.hash){let s=document.getElementById(decodeURIComponent(c.hash.slice(1)));if(s){s.scrollIntoView();return}}u!==!0&&window.scrollTo(0,0)}},[c,o,u]))}function we(t,r){let{capture:e}={};n.useEffect(()=>{let i=e!=null?{capture:e}:void 0;return window.addEventListener("pagehide",t,i),()=>{window.removeEventListener("pagehide",t,i)}},[t,e])}export{Ee as R,_e as S,Te as c};
